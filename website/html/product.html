<h1>##page_title##</h1>

<div class="product-layout">
    <form action="" method="post" enctype="multipart/form-data">

        <div class="main-column">
            <div class="form-section">
                <label for="product-name">Product Title</label>
                <input type="text" placeholder="Enter product name..." name="product-name" value="##product_name##"
                    class="title-input" required>
                <br /><br />
                <label for="description">Product Description</label>
                <div class="wysiwyg-container">
                    <div class="wysiwyg-toolbar">
                        <button type="button" class="toolbar-btn" onclick="execCmd('bold')" title="Bold">
                            <i class="fas fa-bold"></i>
                        </button>
                        <button type="button" class="toolbar-btn" onclick="execCmd('italic')" title="Italic">
                            <i class="fas fa-italic"></i>
                        </button>
                        <button type="button" class="toolbar-btn" onclick="execCmd('underline')" title="Underline">
                            <i class="fas fa-underline"></i>
                        </button>
                        <button type="button" class="toolbar-btn" onclick="execCmd('insertUnorderedList')"
                            title="Bullet List">
                            <i class="fas fa-list-ul"></i>
                        </button>
                        <button type="button" class="toolbar-btn" onclick="execCmd('insertOrderedList')"
                            title="Numbered List">
                            <i class="fas fa-list-ol"></i>
                        </button>
                        <button type="button" class="toolbar-btn" onclick="execCmd('justifyLeft')" title="Align Left">
                            <i class="fas fa-align-left"></i>
                        </button>
                        <button type="button" class="toolbar-btn" onclick="execCmd('justifyCenter')" title="Center">
                            <i class="fas fa-align-center"></i>
                        </button>
                        <button type="button" class="toolbar-btn" onclick="execCmd('justifyRight')" title="Align Right">
                            <i class="fas fa-align-right"></i>
                        </button>
                    </div>
                    <div class="wysiwyg-editor description" contenteditable="true" id="description-editor"
                        data-placeholder="Describe your product in detail...">##product_description##</div>
                    <textarea name="description" id="description-hidden" style="display: none;"></textarea>
                </div>
                <br /><br />
                <label for="description">Additional Images</label>
                <div class="image-upload-area">
                    <input type="file" name="product-images[]" accept="image/*" multiple id="additional-images"
                        class="file-input">
                    <label for="additional-images" class="file-upload-label">
                        <div class="upload-placeholder">
                            <p>Upload gallery images</p>
                            <small>Select multiple images</small>
                        </div>
                    </label>
                </div>
            </div>
        </div>

        <div class="sidebar-column">

            <div class="sidebar-card">
                <h3>Publish</h3>
                <div class="form-group">
                    <label for="is-available">Status</label>
                    <select name="is-available" required>
                        <option value="True" ##available_selected##>Published</option>
                        <option value="False" ##draft_selected##>Draft</option>
                    </select>
                </div>
                <div class="publish-actions">
                    <button type="submit" name="action" value="save" class="btn-primary">##submit_button_text##</button>
                    ##delete_button##
                </div>
            </div>

            <div class="sidebar-card">
                <h3>Pricing & Inventory</h3>
                <div class="form-group">
                    <label for="price">Price ($)</label>
                    <input type="number" step="0.01" placeholder="0.00" name="price" value="##product_price##" required>
                </div>
                <div class="form-group">
                    <label for="quantity">Quantity in Stock</label>
                    <input type="number" placeholder="0" name="quantity" value="##product_quantity##" required>
                </div>
            </div>

            <div class="sidebar-card">
                <h3>Featured Image</h3>
                ##featured_image_preview##
                <div class="image-upload-area">
                    <input type="file" name="featured-image" accept="image/*" id="featured-image" class="file-input">
                    <label for="featured-image" class="file-upload-label">
                        <div class="upload-placeholder">
                            <p>Click to upload featured image</p>
                            <small>Recommended: 800x600px</small>
                        </div>
                    </label>
                </div>
            </div>
            <div class="sidebar-card">
                <h3>Categories</h3>
                <div class="scrollable-checkbox-list">
                    ##categories_checkboxes##
                </div>
            </div>

        </div>

        ##product_id_hidden##
    </form>
</div>

<!-- Font Awesome for Editor Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<link rel="stylesheet" href="##site##assets/css/wysiwyg.css">
<script src="##site##assets/js/wysiwyg.js"></script>
<script>
    // Initialise the WYSIWYG editor content on page load
    document.addEventListener('DOMContentLoaded', function () {
        const editor = document.getElementById('description-editor');
        const hiddenField = document.getElementById('description-hidden');

        // Sync existing content from editor to hidden field
        if (editor && hiddenField) {
            // If editor has content (from ##business_details## token), sync it
            const content = editor.innerHTML.trim();
            if (content && !content.includes('data-placeholder')) {
                hiddenField.value = content;
            }
        }
    });
</script>